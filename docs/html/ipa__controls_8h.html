<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JetPackJoyRide: src/peripherals/camera/libcamera/include/libcamera/ipa/ipa_controls.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">JetPackJoyRide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_fbf0f2406da70b7242e9fe36900a795c.html">peripherals</a></li><li class="navelem"><a class="el" href="dir_7edb75cd9403ee3c6e4c58adfdccffea.html">camera</a></li><li class="navelem"><a class="el" href="dir_428dda2b88cc4f99cb3d972947069539.html">libcamera</a></li><li class="navelem"><a class="el" href="dir_ab9b34a6c00a9fa7c641a693a7dcec4b.html">include</a></li><li class="navelem"><a class="el" href="dir_9bdda371933c02413def64c6ef63d0b2.html">libcamera</a></li><li class="navelem"><a class="el" href="dir_186cf76aeee41d1fcc5abd2c7942aed1.html">ipa</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle"><div class="title">ipa_controls.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Type definitions for serialized controls.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="ipa__controls_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structipa__controls__header.html">ipa_controls_header</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialized control packet header.  <a href="structipa__controls__header.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structipa__control__value__entry.html">ipa_control_value_entry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description of a serialized ControlValue entry.  <a href="structipa__control__value__entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structipa__control__info__entry.html">ipa_control_info_entry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description of a serialized ControlInfo entry.  <a href="structipa__control__info__entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab0636e3df8b5a856b6949abc81bc80d1" id="r_ab0636e3df8b5a856b6949abc81bc80d1"><td class="memItemLeft" align="right" valign="top"><a id="ab0636e3df8b5a856b6949abc81bc80d1" name="ab0636e3df8b5a856b6949abc81bc80d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IPA_CONTROLS_FORMAT_VERSION</b>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ab0636e3df8b5a856b6949abc81bc80d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current control serialization format version. <br /></td></tr>
<tr class="separator:ab0636e3df8b5a856b6949abc81bc80d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae93b42c8b5a94e0e95fe87fc640013b6" id="r_ae93b42c8b5a94e0e95fe87fc640013b6"><td class="memItemLeft" align="right" valign="top"><a id="ae93b42c8b5a94e0e95fe87fc640013b6" name="ae93b42c8b5a94e0e95fe87fc640013b6"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>ipa_controls_id_map_type</b> { <b>IPA_CONTROL_ID_MAP_CONTROLS</b>
, <b>IPA_CONTROL_ID_MAP_PROPERTIES</b>
, <b>IPA_CONTROL_ID_MAP_V4L2</b>
 }</td></tr>
<tr class="separator:ae93b42c8b5a94e0e95fe87fc640013b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Type definitions for serialized controls. </p>
<p>This file defines binary formats to store ControlList and ControlInfoMap instances in contiguous, self-contained memory areas called control packets. It describes the layout of the packets through a set of C structures. These formats shall be used when serializing ControlList and ControlInfoMap to transfer them through the IPA C interface and IPA IPC transports.</p>
<p>A control packet contains a list of entries, each of them describing a single control info or control value. The packet starts with a fixed-size header described by the <a class="el" href="structipa__controls__header.html" title="Serialized control packet header.">ipa_controls_header</a> structure, followed by an array of fixed-size entries. Each entry is associated with data, stored either directly in the entry, or in a data section after the entries array.</p>
<p>The following diagram describes the layout of the ControlList packet.</p>
<div class="fragment"><div class="line">          +-------------------------+    .                      .</div>
<div class="line"> Header / | <a class="code hl_struct" href="structipa__controls__header.html">ipa_controls_header</a>     |    |                      |</div>
<div class="line">        | |                         |    |                      |</div>
<div class="line">        \ |                         |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">        / | <a class="code hl_struct" href="structipa__control__value__entry.html">ipa_control_value_entry</a> |    | hdr.data_offset      |</div>
<div class="line">        | | #0                      |    |                      |</div>
<div class="line">Control | +-------------------------+    |                      |</div>
<div class="line">  value | | ...                     |    |                      |</div>
<div class="line">entries | +-------------------------+    |                      |</div>
<div class="line">        | | <a class="code hl_struct" href="structipa__control__value__entry.html">ipa_control_value_entry</a> |    |             hdr.size |</div>
<div class="line">        \ | #hdr.entries - 1        |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">          | empty space (optional)  |    |                      |</div>
<div class="line">          +-------------------------+ &lt;--´  .                   |</div>
<div class="line">        / | ...                     |       | entry[n].<a class="code hl_variable" href="structipa__control__value__entry.html#a0149b36aaceca06dc04e37edcad3aadb">offset</a>   |</div>
<div class="line">   Data | | ...                     |       |                   |</div>
<div class="line">section | | value data <span class="keywordflow">for</span> entry #n | &lt;-----´                   |</div>
<div class="line">        \ | ...                     |                           |</div>
<div class="line">          +-------------------------+                           |</div>
<div class="line">          | empty space (optional)  |                           |</div>
<div class="line">          +-------------------------+ &lt;-------------------------´</div>
<div class="ttc" id="astructipa__control__value__entry_html"><div class="ttname"><a href="structipa__control__value__entry.html">ipa_control_value_entry</a></div><div class="ttdoc">Description of a serialized ControlValue entry.</div></div>
<div class="ttc" id="astructipa__control__value__entry_html_a0149b36aaceca06dc04e37edcad3aadb"><div class="ttname"><a href="structipa__control__value__entry.html#a0149b36aaceca06dc04e37edcad3aadb">ipa_control_value_entry::offset</a></div><div class="ttdeci">uint32_t offset</div><div class="ttdef"><b>Definition</b> ipa_controls.h:41</div></div>
<div class="ttc" id="astructipa__controls__header_html"><div class="ttname"><a href="structipa__controls__header.html">ipa_controls_header</a></div><div class="ttdoc">Serialized control packet header.</div></div>
</div><!-- fragment --><p>The packet header contains the size of the packet, the number of entries, and the offset from the beginning of the packet to the data section. The packet entries array immediately follows the header. The data section starts at the offset <a class="el" href="structipa__controls__header.html#afcc4caa0f6eb56f4357ab2441581ef9e">ipa_controls_header::data_offset</a> from the beginning of the packet, and shall be aligned to a multiple of 8 bytes.</p>
<p>Entries are described by the <a class="el" href="structipa__control__value__entry.html" title="Description of a serialized ControlValue entry.">ipa_control_value_entry</a> structure. They contain the numerical ID of the control, its type, and the number of control values.</p>
<p>The control values are stored in the data section in the platform's native format. The <a class="el" href="structipa__control__value__entry.html#a0149b36aaceca06dc04e37edcad3aadb">ipa_control_value_entry::offset</a> field stores the offset from the beginning of the data section to the values.</p>
<p>All control values in the data section shall be stored in the same order as the respective control entries, shall be aligned to a multiple of 8 bytes, and shall be contiguous in memory.</p>
<p>Empty spaces may be present between the end of the entries array and the data section, and after the data section. They shall be ignored when parsing the packet.</p>
<p>The following diagram describes the layout of the ControlInfoMap packet.</p>
<div class="fragment"><div class="line">          +-------------------------+    .                      .</div>
<div class="line"> Header / | <a class="code hl_struct" href="structipa__controls__header.html">ipa_controls_header</a>     |    |                      |</div>
<div class="line">        | |                         |    |                      |</div>
<div class="line">        \ |                         |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">        / | <a class="code hl_struct" href="structipa__control__info__entry.html">ipa_control_info_entry</a>  |    | hdr.data_offset      |</div>
<div class="line">        | | #0                      |    |                      |</div>
<div class="line">Control | +-------------------------+    |                      |</div>
<div class="line">   info | | ...                     |    |                      |</div>
<div class="line">entries | +-------------------------+    |                      |</div>
<div class="line">        | | <a class="code hl_struct" href="structipa__control__info__entry.html">ipa_control_info_entry</a>  |    |             hdr.size |</div>
<div class="line">        \ | #hdr.entries - 1        |    |                      |</div>
<div class="line">          +-------------------------+    |                      |</div>
<div class="line">          | empty space (optional)  |    |                      |</div>
<div class="line">          +-------------------------+ &lt;--´  .                   |</div>
<div class="line">        / | ...                     |       | entry[n].<a class="code hl_variable" href="structipa__control__info__entry.html#ab2e9fc6030eacf7f1b4f80da44015eb5">offset</a>   |</div>
<div class="line">   Data | | ...                     |       |                   |</div>
<div class="line">section | | info data <span class="keywordflow">for</span> entry #n  | &lt;-----´                   |</div>
<div class="line">        \ | ...                     |                           |</div>
<div class="line">          +-------------------------+                           |</div>
<div class="line">          | empty space (optional)  |                           |</div>
<div class="line">          +-------------------------+ &lt;-------------------------´</div>
<div class="ttc" id="astructipa__control__info__entry_html"><div class="ttname"><a href="structipa__control__info__entry.html">ipa_control_info_entry</a></div><div class="ttdoc">Description of a serialized ControlInfo entry.</div></div>
<div class="ttc" id="astructipa__control__info__entry_html_ab2e9fc6030eacf7f1b4f80da44015eb5"><div class="ttname"><a href="structipa__control__info__entry.html#ab2e9fc6030eacf7f1b4f80da44015eb5">ipa_control_info_entry::offset</a></div><div class="ttdeci">uint32_t offset</div><div class="ttdef"><b>Definition</b> ipa_controls.h:48</div></div>
</div><!-- fragment --><p>The packet header is identical to the ControlList packet header.</p>
<p>Entries are described by the <a class="el" href="structipa__control__info__entry.html" title="Description of a serialized ControlInfo entry.">ipa_control_info_entry</a> structure. They contain the numerical ID and type of the control. The control info data is stored in the data section as described by the following diagram.</p>
<div class="fragment"><div class="line">          +-------------------------+       .</div>
<div class="line">        / | ...                     |       | entry[n].offset</div>
<div class="line">        | +-------------------------+ &lt;-----´</div>
<div class="line">        | | minimum value (#n)      | \</div>
<div class="line">   Data | +-------------------------+ |</div>
<div class="line">section | | maximum value (#n)      | | Entry #n</div>
<div class="line">        | +-------------------------+ |</div>
<div class="line">        | | <span class="keywordflow">default</span> value (#n)      | /</div>
<div class="line">        | +-------------------------+</div>
<div class="line">        \ | ...                     |</div>
<div class="line">          +-------------------------+</div>
</div><!-- fragment --><p>The minimum, maximum and default values are stored in the platform's native data format. The <a class="el" href="structipa__control__info__entry.html#ab2e9fc6030eacf7f1b4f80da44015eb5">ipa_control_info_entry::offset</a> field stores the offset from the beginning of the data section to the info data.</p>
<p>Info data in the data section shall be stored in the same order as the entries array, shall be aligned to a multiple of 8 bytes, and shall be contiguous in memory.</p>
<p>As for the ControlList packet, empty spaces may be present between the end of the entries array and the data section, and after the data section. They shall be ignored when parsing the packet. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
